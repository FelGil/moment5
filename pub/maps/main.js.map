{"version":3,"sources":["main.js"],"names":["coursesEl","document","getElementById","addCourseBtn","updateCourseBtn","codeEl","nameEl","progressionEl","syllabusEl","formheaderEl","idHolder","getCourses","innerHTML","fetch","then","response","json","data","forEach","course","code","name","progression","syllabus","id","deleteCourse","method","text","catch","error","console","log","createCourse","conCourse","value","headers","body","JSON","stringify","setFormCourse","style","display","updateCourse","window","addEventListener"],"mappings":"AAAA,aAGA,IAAAA,UAAAC,SAAAC,eAAA,WACAC,aAAAF,SAAAC,eAAA,aACAE,gBAAAH,SAAAC,eAAA,gBACAG,OAAAJ,SAAAC,eAAA,cACAI,OAAAL,SAAAC,eAAA,cACAK,cAAAN,SAAAC,eAAA,qBACAM,WAAAP,SAAAC,eAAA,kBACAO,aAAAR,SAAAC,eAAA,cAEAQ,SAAA,GAUA,SAAAC,aAEAX,UAAAY,UAAA,GAEAZ,UAAAY,WACA,wVAiBAC,MAAA,kCACAC,MAAAC,GAAAA,EAAAC,SACAF,MAAAG,IACAA,EAAAC,SAAAC,IACAnB,UAAAY,WACA,wFAEAO,EAAAC,yFAGAD,EAAAE,yFAGAF,EAAAG,yGAGAH,EAAAI,mHAGAJ,EAAAK,6CAAAL,EAAAK,6DACAL,EAAAK,iDAAAL,EAAAK,wEAUA,SAAAC,aAAAD,GAEAX,MAAA,qCAAAW,EAAA,CACAE,OAAA,WAEAZ,MAAAC,GAAAA,EAAAY,SACAb,MAAAG,IACAN,gBAEAiB,OAAAC,IACAC,QAAAC,IAAA,UAAAF,MAKA,SAAAG,eAEA,IAKAC,EAAA,CAAAb,KALAf,OAAA6B,MAKAb,KAJAf,OAAA4B,MAIAZ,YAHAf,cAAA2B,MAGAX,SAFAf,WAAA0B,OAIArB,MAAA,iCAAA,CACAa,OAAA,OACAS,QAAA,CACA,eAAA,mCAEAC,KAAAC,KAAAC,UAAAL,KAEAnB,MAAAC,GAAAA,EAAAY,SACAb,MAAAG,IACAN,gBAEAiB,OAAAC,IACAC,QAAAC,IAAA,UAAAF,MAKA,SAAAU,cAAAf,GAEArB,aAAAqC,MAAAC,QAAA,OACArC,gBAAAoC,MAAAC,QAAA,QACAhC,aAAAG,UAAA,aAEAF,SAAAc,EAEAX,MAAA,qCAAAW,GACAV,MAAAC,GAAAA,EAAAC,SACAF,MAAAG,IACAA,EAAAC,SAAAC,IACAd,OAAA6B,MAAAf,EAAAC,KACAd,OAAA4B,MAAAf,EAAAE,KACAd,cAAA2B,MAAAf,EAAAG,YACAd,WAAA0B,MAAAf,EAAAI,eAOA,SAAAmB,eAEA,IAAAtB,EAAAf,OAAA6B,MACAb,EAAAf,OAAA4B,MACAZ,EAAAf,cAAA2B,MACAX,EAAAf,WAAA0B,MAEAD,EAAA,CAAAT,GAAAd,SAAAU,KAAAA,EAAAC,KAAAA,EAAAC,YAAAA,EAAAC,SAAAA,GACAO,QAAAC,IAAAE,GACApB,MAAA,qCAAAH,SAAA,CACAgB,OAAA,MACAU,KAAAC,KAAAC,UAAAL,KAEAnB,MAAAC,GAAAA,EAAAY,SACAb,MAAAG,IACAN,gBAEAiB,OAAAC,IACAC,QAAAC,IAAA,UAAAF,MA5IAc,OAAAC,iBAAA,OAAAjC,YACAR,aAAAyC,iBAAA,QAAAZ,cACA5B,gBAAAwC,iBAAA,QAAAF","file":"../js/main.js","sourcesContent":["\"use strict\"\r\n\r\n//Varliables\r\nlet coursesEl = document.getElementById(\"courses\");\r\nlet addCourseBtn = document.getElementById(\"addCourse\");\r\nlet updateCourseBtn = document.getElementById(\"updateCourse\");\r\nlet codeEl = document.getElementById(\"coursecode\");\r\nlet nameEl = document.getElementById(\"coursename\");\r\nlet progressionEl = document.getElementById(\"courseprogression\");\r\nlet syllabusEl = document.getElementById(\"coursesyllabus\");\r\nlet formheaderEl = document.getElementById(\"formheader\");\r\n\r\nlet idHolder = \"\";\r\n\r\n//Eventlisteners\r\nwindow.addEventListener('load', getCourses);\r\naddCourseBtn.addEventListener('click',createCourse);\r\nupdateCourseBtn.addEventListener('click',updateCourse);\r\n\r\n//Functions\r\n\r\n//function to get courses\r\nfunction getCourses() {\r\n\r\n    coursesEl.innerHTML = '';\r\n\r\n    coursesEl.innerHTML +=\r\n    `<div class=\"courseWrapper\">\r\n        <div class=\"col1\">\r\n            <b>Kod:</b>\r\n        </div>\r\n        <div class=\"col2\">\r\n            <b>Kurs namn:</b> \r\n        </div>\r\n        <div class=\"col3\">\r\n            <b>Progression:</b>\r\n        </div>\r\n        <div class=\"col4\">\r\n            <b>Kursplan:</b>\r\n        </div>\r\n    </div>\r\n    `;\r\n\r\n\r\n    fetch('http://localhost/moment5ws/api')\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        data.forEach(course => {\r\n            coursesEl.innerHTML +=\r\n            `<div class=\"courseWrapper\">\r\n                <div class=\"col1\">\r\n                    ${course.code}\r\n                </div>\r\n                <div class=\"col2\">\r\n                    ${course.name}\r\n                </div>\r\n                <div class=\"col3\">\r\n                    ${course.progression}\r\n                </div>\r\n                <div class=\"col4\">\r\n                    <a href=\"${course.syllabus}\">Länk</a>\r\n                </div>\r\n                <div class=\"col5\">\r\n                    <button id=\"${course.id}\" class=\"btn_del\" onClick=\"deleteCourse(${course.id})\">Radera</button><br>\r\n                    <button id=\"${course.id}\" class=\"btn_update\" onClick=\"setFormCourse(${course.id})\">Ändra</button>\r\n                </div>\r\n            </div>`;\r\n            \r\n        });\r\n    })\r\n\r\n}\r\n\r\n//function to delete a specific course\r\nfunction deleteCourse(id) {\r\n\r\n    fetch('http://localhost/moment5ws/api?id=' + id, {\r\n        method: 'DELETE',\r\n    })\r\n    .then(response => response.text())\r\n    .then(data => {\r\n        getCourses();\r\n    })\r\n    .catch(error => {\r\n        console.log('Error: ', error);\r\n    })\r\n}\r\n\r\n//function to create a course\r\nfunction createCourse() {\r\n\r\n    let code = codeEl.value;\r\n    let name = nameEl.value;\r\n    let progression = progressionEl.value;\r\n    let syllabus = syllabusEl.value;\r\n\r\n    let conCourse = {'code': code, 'name': name, 'progression': progression, 'syllabus': syllabus};\r\n    \r\n    fetch('http://localhost/moment5ws/api', {\r\n        method: 'POST',\r\n        headers: {\r\n            \"Content-type\": \"application/json; charset=UTF-8\"\r\n        },\r\n        body: JSON.stringify(conCourse),\r\n    })\r\n    .then(response => response.text())\r\n    .then(data => {\r\n        getCourses();\r\n    })\r\n    .catch(error => {\r\n        console.log('Error: ', error);\r\n    })\r\n}\r\n\r\n//function to populate the form when \"Ändra\" is pushed next to a course\r\nfunction setFormCourse(id){\r\n\r\n    addCourseBtn.style.display = 'none';\r\n    updateCourseBtn.style.display = 'block';\r\n    formheaderEl.innerHTML = \"Ändra kurs\";\r\n\r\n    idHolder = id;\r\n\r\n    fetch('http://localhost/moment5ws/api?id=' + id)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        data.forEach(course => {\r\n            codeEl.value = course.code;\r\n            nameEl.value = course.name;\r\n            progressionEl.value = course.progression;\r\n            syllabusEl.value = course.syllabus;\r\n                        \r\n        });\r\n    })\r\n}\r\n\r\n//fucntion to update a course with new data\r\nfunction updateCourse(){\r\n\r\n    let code = codeEl.value;\r\n    let name = nameEl.value;\r\n    let progression = progressionEl.value;\r\n    let syllabus = syllabusEl.value;\r\n    \r\n    let conCourse = {'id': idHolder, 'code': code, 'name': name, 'progression': progression, 'syllabus': syllabus};\r\n    console.log(conCourse);\r\n    fetch('http://localhost/moment5ws/api?id=' + idHolder, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(conCourse),\r\n    })\r\n    .then(response => response.text())\r\n    .then(data => {\r\n        getCourses();\r\n    })\r\n    .catch(error => {\r\n        console.log('Error: ', error);\r\n    })\r\n}"]}