{"version":3,"sources":["main.js"],"names":["coursesEl","document","getElementById","addCourseBtn","updateCourseBtn","codeEl","nameEl","progressionEl","syllabusEl","formheaderEl","idHolder","getCourses","innerHTML","fetch","then","response","json","data","forEach","course","code","name","progression","syllabus","id","deleteCourse","method","text","catch","error","console","log","createCourse","conCourse","value","headers","body","JSON","stringify","setFormCourse","style","display","updateCourse","window","addEventListener"],"mappings":"AAAA,aAGA,IAAIA,UAAYC,SAASC,eAAe,WACpCC,aAAeF,SAASC,eAAe,aACvCE,gBAAkBH,SAASC,eAAe,gBAC1CG,OAASJ,SAASC,eAAe,cACjCI,OAASL,SAASC,eAAe,cACjCK,cAAgBN,SAASC,eAAe,qBACxCM,WAAaP,SAASC,eAAe,kBACrCO,aAAeR,SAASC,eAAe,cAEvCQ,SAAW,GAUf,SAASC,aAELX,UAAUY,UAAY,GAEtBZ,UAAUY,WACT,wVAiBDC,MAAM,mEACLC,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACFA,EAAKC,SAAQC,IACTnB,UAAUY,WACT,wFAESO,EAAOC,yFAGPD,EAAOE,yFAGPF,EAAOG,yGAGEH,EAAOI,mHAGJJ,EAAOK,6CAA6CL,EAAOK,6DAC3DL,EAAOK,iDAAiDL,EAAOK,wEAUjG,SAASC,aAAaD,GAGlBX,MAAM,sEAAwEW,EAAI,CAC9EE,OAAQ,WAEXZ,MAAKC,GAAYA,EAASY,SAC1Bb,MAAKG,IACFN,gBAEHiB,OAAMC,IACHC,QAAQC,IAAI,UAAWF,MAK/B,SAASG,eAEL,IAKIC,EAAY,CAACb,KALNf,OAAO6B,MAKab,KAJpBf,OAAO4B,MAI2BZ,YAH3Bf,cAAc2B,MAGyCX,SAF1Df,WAAW0B,OAK1BrB,MAAM,kEAAmE,CACrEa,OAAQ,OACRS,QAAS,CACL,eAAgB,mCAEpBC,KAAMC,KAAKC,UAAUL,KAExBnB,MAAKC,GAAYA,EAASY,SAC1Bb,MAAKG,IACFN,gBAEHiB,OAAMC,IACHC,QAAQC,IAAI,UAAWF,MAK/B,SAASU,cAAcf,GAEnBrB,aAAaqC,MAAMC,QAAU,OAC7BrC,gBAAgBoC,MAAMC,QAAU,QAChChC,aAAaG,UAAY,aAEzBF,SAAWc,EAEXX,MAAM,sEAAwEW,GAC7EV,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACFA,EAAKC,SAAQC,IACTd,OAAO6B,MAAQf,EAAOC,KACtBd,OAAO4B,MAAQf,EAAOE,KACtBd,cAAc2B,MAAQf,EAAOG,YAC7Bd,WAAW0B,MAAQf,EAAOI,eAOtC,SAASmB,eAEL,IAAItB,EAAOf,OAAO6B,MACdb,EAAOf,OAAO4B,MACdZ,EAAcf,cAAc2B,MAC5BX,EAAWf,WAAW0B,MAEtBD,EAAY,CAACT,GAAMd,SAAUU,KAAQA,EAAMC,KAAQA,EAAMC,YAAeA,EAAaC,SAAYA,GAGrGV,MAAM,sEAAwEH,SAAU,CACpFgB,OAAQ,MACRU,KAAMC,KAAKC,UAAUL,KAExBnB,MAAKC,GAAYA,EAASY,SAC1Bb,MAAKG,IACFN,gBAEHiB,OAAMC,IACHC,QAAQC,IAAI,UAAWF,MA/I/Bc,OAAOC,iBAAiB,OAAQjC,YAChCR,aAAayC,iBAAiB,QAAQZ,cACtC5B,gBAAgBwC,iBAAiB,QAAQF","file":"../js/main.js","sourcesContent":["\"use strict\"\r\n\r\n//Varliables\r\nlet coursesEl = document.getElementById(\"courses\");\r\nlet addCourseBtn = document.getElementById(\"addCourse\");\r\nlet updateCourseBtn = document.getElementById(\"updateCourse\");\r\nlet codeEl = document.getElementById(\"coursecode\");\r\nlet nameEl = document.getElementById(\"coursename\");\r\nlet progressionEl = document.getElementById(\"courseprogression\");\r\nlet syllabusEl = document.getElementById(\"coursesyllabus\");\r\nlet formheaderEl = document.getElementById(\"formheader\");\r\n\r\nlet idHolder = \"\";\r\n\r\n//Eventlisteners\r\nwindow.addEventListener('load', getCourses);\r\naddCourseBtn.addEventListener('click',createCourse);\r\nupdateCourseBtn.addEventListener('click',updateCourse);\r\n\r\n//Functions\r\n\r\n//function to get courses\r\nfunction getCourses() {\r\n\r\n    coursesEl.innerHTML = '';\r\n\r\n    coursesEl.innerHTML +=\r\n    `<div class=\"courseWrapper\">\r\n        <div class=\"col1\">\r\n            <b>Kod:</b>\r\n        </div>\r\n        <div class=\"col2\">\r\n            <b>Kurs namn:</b> \r\n        </div>\r\n        <div class=\"col3\">\r\n            <b>Progression:</b>\r\n        </div>\r\n        <div class=\"col4\">\r\n            <b>Kursplan:</b>\r\n        </div>\r\n    </div>\r\n    `;\r\n\r\n    // local url http://localhost/moment5ws/api\r\n    fetch('https://studenter.miun.se/~fegi2000/writeable/moment5ws/api.php')\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        data.forEach(course => {\r\n            coursesEl.innerHTML +=\r\n            `<div class=\"courseWrapper\">\r\n                <div class=\"col1\">\r\n                    ${course.code}\r\n                </div>\r\n                <div class=\"col2\">\r\n                    ${course.name}\r\n                </div>\r\n                <div class=\"col3\">\r\n                    ${course.progression}\r\n                </div>\r\n                <div class=\"col4\">\r\n                    <a href=\"${course.syllabus}\">Länk</a>\r\n                </div>\r\n                <div class=\"col5\">\r\n                    <button id=\"${course.id}\" class=\"btn_del\" onClick=\"deleteCourse(${course.id})\">Radera</button><br>\r\n                    <button id=\"${course.id}\" class=\"btn_update\" onClick=\"setFormCourse(${course.id})\">Ändra</button>\r\n                </div>\r\n            </div>`;\r\n            \r\n        });\r\n    })\r\n\r\n}\r\n\r\n//function to delete a specific course\r\nfunction deleteCourse(id) {\r\n\r\n    //local url http://localhost/moment5ws/api?id=\r\n    fetch('https://studenter.miun.se/~fegi2000/writeable/moment5ws/api.php?id=' + id, {\r\n        method: 'DELETE',\r\n    })\r\n    .then(response => response.text())\r\n    .then(data => {\r\n        getCourses();\r\n    })\r\n    .catch(error => {\r\n        console.log('Error: ', error);\r\n    })\r\n}\r\n\r\n//function to create a course\r\nfunction createCourse() {\r\n\r\n    let code = codeEl.value;\r\n    let name = nameEl.value;\r\n    let progression = progressionEl.value;\r\n    let syllabus = syllabusEl.value;\r\n\r\n    let conCourse = {'code': code, 'name': name, 'progression': progression, 'syllabus': syllabus};\r\n    \r\n    //local url http://localhost/moment5ws/api\r\n    fetch('https://studenter.miun.se/~fegi2000/writeable/moment5ws/api.php', {\r\n        method: 'POST',\r\n        headers: {\r\n            \"Content-type\": \"application/json; charset=UTF-8\"\r\n        },\r\n        body: JSON.stringify(conCourse),\r\n    })\r\n    .then(response => response.text())\r\n    .then(data => {\r\n        getCourses();\r\n    })\r\n    .catch(error => {\r\n        console.log('Error: ', error);\r\n    })\r\n}\r\n\r\n//function to populate the form when \"Ändra\" is pushed next to a course\r\nfunction setFormCourse(id){\r\n\r\n    addCourseBtn.style.display = 'none';\r\n    updateCourseBtn.style.display = 'block';\r\n    formheaderEl.innerHTML = \"Ändra kurs\";\r\n\r\n    idHolder = id;\r\n    //local urlhttp://localhost/moment5ws/api?id=\r\n    fetch('https://studenter.miun.se/~fegi2000/writeable/moment5ws/api.php?id=' + id)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        data.forEach(course => {\r\n            codeEl.value = course.code;\r\n            nameEl.value = course.name;\r\n            progressionEl.value = course.progression;\r\n            syllabusEl.value = course.syllabus;\r\n                        \r\n        });\r\n    })\r\n}\r\n\r\n//fucntion to update a course with new data\r\nfunction updateCourse(){\r\n\r\n    let code = codeEl.value;\r\n    let name = nameEl.value;\r\n    let progression = progressionEl.value;\r\n    let syllabus = syllabusEl.value;\r\n    \r\n    let conCourse = {'id': idHolder, 'code': code, 'name': name, 'progression': progression, 'syllabus': syllabus};\r\n    \r\n    //local url http://localhost/moment5ws/api?id=\r\n    fetch('https://studenter.miun.se/~fegi2000/writeable/moment5ws/api.php?id=' + idHolder, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(conCourse),\r\n    })\r\n    .then(response => response.text())\r\n    .then(data => {\r\n        getCourses();\r\n    })\r\n    .catch(error => {\r\n        console.log('Error: ', error);\r\n    })\r\n}"]}